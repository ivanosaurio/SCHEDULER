[![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-dark.svg&w=256&q=75)![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-light.svg&w=256&q=75)DOCS](https://supabase.com/docs)
  * [Start](https://supabase.com/docs/guides/getting-started)
  * Products 
  * Build 
  * Manage 
  * Reference 
  * Resources 


[![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-dark.svg&w=256&q=75)![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-light.svg&w=256&q=75)DOCS](https://supabase.com/docs)
Search docs...
K
[Sign up](https://supabase.com/dashboard)
Main menu
[Database](https://supabase.com/docs/guides/database/overview)
  * [Overview](https://supabase.com/docs/guides/database/overview)
Fundamentals
  * [Connecting to your database](https://supabase.com/docs/guides/database/connecting-to-postgres)
  * [Importing data](https://supabase.com/docs/guides/database/import-data)
  * [Securing your data](https://supabase.com/docs/guides/database/secure-data)
Working with your database (basics)
  * [Managing tables, views, and data](https://supabase.com/docs/guides/database/tables)
  * [Working with arrays](https://supabase.com/docs/guides/database/arrays)
  * [Managing indexes](https://supabase.com/docs/guides/database/postgres/indexes)
  * [Querying joins and nested tables](https://supabase.com/docs/guides/database/joins-and-nesting)
  * [JSON and unstructured data](https://supabase.com/docs/guides/database/json)
Working with your database (intermediate)
  * [Implementing cascade deletes](https://supabase.com/docs/guides/database/postgres/cascade-deletes)
  * [Managing enums](https://supabase.com/docs/guides/database/postgres/enums)
  * [Managing database functions](https://supabase.com/docs/guides/database/functions)
  * [Managing database triggers](https://supabase.com/docs/guides/database/postgres/triggers)
  * [Managing database webhooks](https://supabase.com/docs/guides/database/webhooks)
  * [Using Full Text Search](https://supabase.com/docs/guides/database/full-text-search)
  * [Partitioning your tables](https://supabase.com/docs/guides/database/partitions)
  * [Managing connections](https://supabase.com/docs/guides/database/connection-management)
OrioleDB
  * [Overview](https://supabase.com/docs/guides/database/orioledb)
Access and security
  * [Row Level Security](https://supabase.com/docs/guides/database/postgres/row-level-security)
  * [Column Level Security](https://supabase.com/docs/guides/database/postgres/column-level-security)
  * [Hardening the Data API](https://supabase.com/docs/guides/database/hardening-data-api)
  * [Custom Claims & RBAC](https://supabase.com/docs/guides/database/postgres/custom-claims-and-role-based-access-control-rbac)
  * [Managing Postgres Roles](https://supabase.com/docs/guides/database/postgres/roles)
  * [Using Custom Postgres Roles](https://supabase.com/docs/guides/storage/schema/custom-roles)
  * [Managing secrets with Vault](https://supabase.com/docs/guides/database/vault)
  * [Superuser Access and Unsupported Operations](https://supabase.com/docs/guides/database/postgres/roles-superuser)
Configuration, optimization, and testing
  * [Database configuration](https://supabase.com/docs/guides/database/postgres/configuration)
  * [Query optimization](https://supabase.com/docs/guides/database/query-optimization)
  * [Database Advisors](https://supabase.com/docs/guides/database/database-advisors)
  * [Testing your database](https://supabase.com/docs/guides/database/testing)
  * [Customizing Postgres config](https://supabase.com/docs/guides/database/custom-postgres-config)
Debugging
  * [Timeouts](https://supabase.com/docs/guides/database/postgres/timeouts)
  * [Debugging and monitoring](https://supabase.com/docs/guides/database/inspect)
  * [Debugging performance issues](https://supabase.com/docs/guides/database/debugging-performance)
  * [Supavisor](https://supabase.com/docs/guides/database/supavisor)
ORM Quickstarts
  * [Prisma](https://supabase.com/docs/guides/database/prisma)
  * [Drizzle](https://supabase.com/docs/guides/database/drizzle)
  * [Postgres.js](https://supabase.com/docs/guides/database/postgres-js)
GUI quickstarts
  * [pgAdmin](https://supabase.com/docs/guides/database/pgadmin)
  * [PSQL](https://supabase.com/docs/guides/database/psql)
  * [DBeaver](https://supabase.com/docs/guides/database/dbeaver)
  * [Metabase](https://supabase.com/docs/guides/database/metabase)
  * [Beekeeper Studio](https://supabase.com/docs/guides/database/beekeeper-studio)
Database replication
  * [Overview](https://supabase.com/docs/guides/database/replication)
  * [Setting up replication](https://supabase.com/docs/guides/database/replication/setting-up-replication)
  * [Monitoring replication](https://supabase.com/docs/guides/database/replication/monitoring-replication)
  * [FAQ](https://supabase.com/docs/guides/database/replication/faq)
Extensions
  * [Overview](https://supabase.com/docs/guides/database/extensions)
  * [HypoPG: Hypothetical indexes](https://supabase.com/docs/guides/database/extensions/hypopg)
  * [plv8 (deprecated)](https://supabase.com/docs/guides/database/extensions/plv8)
  * [http: RESTful Client](https://supabase.com/docs/guides/database/extensions/http)
  * [index_advisor: Query optimization](https://supabase.com/docs/guides/database/extensions/index_advisor)
  * [PGAudit: Postgres Auditing](https://supabase.com/docs/guides/database/extensions/pgaudit)
  * [pgjwt (deprecated)](https://supabase.com/docs/guides/database/extensions/pgjwt)
  * [PGroonga: Multilingual Full Text Search](https://supabase.com/docs/guides/database/extensions/pgroonga)
  * [pgRouting: Geospatial Routing](https://supabase.com/docs/guides/database/extensions/pgrouting)
  * [pg_cron: Schedule Recurring Jobs](https://supabase.com/docs/guides/database/extensions/pg_cron)
  * [pg_graphql: GraphQL Support](https://supabase.com/docs/guides/database/extensions/pg_graphql)
  * [pg_hashids: Short UIDs](https://supabase.com/docs/guides/database/extensions/pg_hashids)
  * [pg_jsonschema: JSON Schema Validation](https://supabase.com/docs/guides/database/extensions/pg_jsonschema)
  * [pg_net: Async Networking](https://supabase.com/docs/guides/database/extensions/pg_net)
  * [pg_plan_filter: Restrict Total Cost](https://supabase.com/docs/guides/database/extensions/pg_plan_filter)
  * [postgres_fdw: query data from an external Postgres server](https://supabase.com/docs/guides/database/extensions/postgres_fdw)
  * [pgvector: Embeddings and vector similarity](https://supabase.com/docs/guides/database/extensions/pgvector)
  * [pg_stat_statements: SQL Planning and Execution Statistics](https://supabase.com/docs/guides/database/extensions/pg_stat_statements)
  * [pg_repack: Storage Optimization](https://supabase.com/docs/guides/database/extensions/pg_repack)
  * [PostGIS: Geo queries](https://supabase.com/docs/guides/database/extensions/postgis)
  * [pgmq: Queues](https://supabase.com/docs/guides/database/extensions/pgmq)
  * [pgsodium (pending deprecation): Encryption Features](https://supabase.com/docs/guides/database/extensions/pgsodium)
  * [pgTAP: Unit Testing](https://supabase.com/docs/guides/database/extensions/pgtap)
  * [plpgsql_check: PL/pgSQL Linter](https://supabase.com/docs/guides/database/extensions/plpgsql_check)
  * [timescaledb (deprecated)](https://supabase.com/docs/guides/database/extensions/timescaledb)
  * [uuid-ossp: Unique Identifiers](https://supabase.com/docs/guides/database/extensions/uuid-ossp)
  * [RUM: inverted index for full-text search](https://supabase.com/docs/guides/database/extensions/rum)
Foreign Data Wrappers
  * [Overview](https://supabase.com/docs/guides/database/extensions/wrappers/overview)
  * [Connecting to Auth0](https://supabase.com/docs/guides/database/extensions/wrappers/auth0)
  * [Connecting to Airtable](https://supabase.com/docs/guides/database/extensions/wrappers/airtable)
  * [Connecting to AWS Cognito](https://supabase.com/docs/guides/database/extensions/wrappers/cognito)
  * [Connecting to AWS S3](https://supabase.com/docs/guides/database/extensions/wrappers/s3)
  * [Connecting to BigQuery](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery)
  * [Connecting to Clerk](https://supabase.com/docs/guides/database/extensions/wrappers/clerk)
  * [Connecting to ClickHouse](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse)
  * [Connecting to Firebase](https://supabase.com/docs/guides/database/extensions/wrappers/firebase)
  * [Connecting to Logflare](https://supabase.com/docs/guides/database/extensions/wrappers/logflare)
  * [Connecting to MSSQL](https://supabase.com/docs/guides/database/extensions/wrappers/mssql)
  * [Connecting to Notion](https://supabase.com/docs/guides/database/extensions/wrappers/notion)
  * [Connecting to Paddle](https://supabase.com/docs/guides/database/extensions/wrappers/paddle)
  * [Connecting to Redis](https://supabase.com/docs/guides/database/extensions/wrappers/redis)
  * [Connecting to Snowflake](https://supabase.com/docs/guides/database/extensions/wrappers/snowflake)
  * [Connecting to Stripe](https://supabase.com/docs/guides/database/extensions/wrappers/stripe)
Examples
  * [Drop All Tables in Schema](https://supabase.com/docs/guides/database/postgres/dropping-all-tables-in-schema)
  * [Select First Row per Group](https://supabase.com/docs/guides/database/postgres/first-row-in-group)
  * [Print PostgreSQL Version](https://supabase.com/docs/guides/database/postgres/which-version-of-postgres)
  * [Replicating from Supabase to External Postgres](https://supabase.com/docs/guides/database/postgres/setup-replication-external)


[![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-dark.svg&w=256&q=75)![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-light.svg&w=256&q=75)DOCS](https://supabase.com/docs)
  * [Start](https://supabase.com/docs/guides/getting-started)
  * Products 
  * Build 
  * Manage 
  * Reference 
  * Resources 


[![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-dark.svg&w=256&q=75)![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-light.svg&w=256&q=75)DOCS](https://supabase.com/docs)
Search docs...
K
[Sign up](https://supabase.com/dashboard)
Database
  1. [Database](https://supabase.com/docs/guides/database/overview)
  2. Working with your database (intermediate)
  3. [Using Full Text Search](https://supabase.com/docs/guides/database/full-text-search)


Full Text Search
How to use full text search in PostgreSQL.
Postgres has built-in functions to handle `Full Text Search` queries. This is like a "search engine" within Postgres.
## Preparation[#](https://supabase.com/docs/guides/database/full-text-search#preparation)
For this guide we'll use the following example data:
DataSQL
id| title| author| description  
---|---|---|---  
1| The Poky Little Puppy| Janette Sebring Lowrey| Puppy is slower than other, bigger animals.  
2| The Tale of Peter Rabbit| Beatrix Potter| Rabbit eats some vegetables.  
3| Tootle| Gertrude Crampton| Little toy train has big dreams.  
4| Green Eggs and Ham| Dr. Seuss| Sam has changing food preferences and eats unusually colored food.  
5| Harry Potter and the Goblet of Fire| J.K. Rowling| Fourth year of school starts, big drama ensues.  
## Usage[#](https://supabase.com/docs/guides/database/full-text-search#usage)
The functions we'll cover in this guide are:
### `to_tsvector()`[#](https://supabase.com/docs/guides/database/full-text-search#to-tsvector)
Converts your data into searchable tokens. `to_tsvector()` stands for "to text search vector." For example:
```

1
2
select to_tsvector('green eggs and ham');-- Returns 'egg':2 'green':1 'ham':4

```

Collectively these tokens are called a "document" which Postgres can use for comparisons.
### `to_tsquery()`[#](https://supabase.com/docs/guides/database/full-text-search#to-tsquery)
Converts a query string into tokens to match. `to_tsquery()` stands for "to text search query."
This conversion step is important because we will want to "fuzzy match" on keywords. For example if a user searches for `eggs`, and a column has the value `egg`, we probably still want to return a match.
### Match: `@@`[#](https://supabase.com/docs/guides/database/full-text-search#match)
The `@@` symbol is the "match" symbol for Full Text Search. It returns any matches between a `to_tsvector` result and a `to_tsquery` result.
Take the following example:
SQLJavaScriptDartSwiftKotlinPython
```

1
2
3
select*from bookswhere title ='Harry';

```

The equality symbol above (`=`) is very "strict" on what it matches. In a full text search context, we might want to find all "Harry Potter" books and so we can rewrite the example above:
SQLJavaScriptDartSwiftKotlin
```

1
2
3
select*from bookswhere to_tsvector(title) @@ to_tsquery('Harry');

```

## Basic full text queries[#](https://supabase.com/docs/guides/database/full-text-search#basic-full-text-queries)
### Search a single column[#](https://supabase.com/docs/guides/database/full-text-search#search-a-single-column)
To find all `books` where the `description` contain the word `big`:
SQLJavaScriptDartSwiftKotlinPythonData
```

1
2
3
4
5
6
7
select*from bookswhere to_tsvector(description) @@ to_tsquery('big');

```

### Search multiple columns[#](https://supabase.com/docs/guides/database/full-text-search#search-multiple-columns)
Right now there is no direct way to use JavaScript or Dart to search through multiple columns but you can do it by creating [computed columns](https://postgrest.org/en/stable/api.html#computed-virtual-columns) on the database.
To find all `books` where `description` or `title` contain the word `little`:
SQLJavaScriptDartSwiftKotlinPythonData
```

1
2
3
4
5
6
7
select*from bookswhere to_tsvector(description||''|| title) -- concat columns, but be sure to include a space to separate them! @@ to_tsquery('little');

```

### Match all search words[#](https://supabase.com/docs/guides/database/full-text-search#match-all-search-words)
To find all `books` where `description` contains BOTH of the words `little` and `big`, we can use the `&` symbol:
SQLJavaScriptDartSwiftKotlinPythonData
```

1
2
3
4
5
6
7
select*from bookswhere to_tsvector(description) @@ to_tsquery('little & big'); -- use & for AND in the search query

```

### Match any search words[#](https://supabase.com/docs/guides/database/full-text-search#match-any-search-words)
To find all `books` where `description` contain ANY of the words `little` or `big`, use the `|` symbol:
SQLJavaScriptDartSwiftKotlinPythonData
```

1
2
3
4
5
6
7
select*from bookswhere to_tsvector(description) @@ to_tsquery('little | big'); -- use | for OR in the search query

```

Notice how searching for `big` includes results with the word `bigger` (or `biggest`, etc).
## Partial search[#](https://supabase.com/docs/guides/database/full-text-search#partial-search)
Partial search is particularly useful when you want to find matches on substrings within your data.
### Implementing partial search[#](https://supabase.com/docs/guides/database/full-text-search#implementing-partial-search)
You can use the `:*` syntax with `to_tsquery()`. Here's an example that searches for any book titles beginning with "Lit":
```

1
select title from books where to_tsvector(title) @@ to_tsquery('Lit:*');

```

### Extending functionality with RPC[#](https://supabase.com/docs/guides/database/full-text-search#extending-functionality-with-rpc)
To make the partial search functionality accessible through the API, you can wrap the search logic in a stored procedure.
After creating this function, you can invoke it from your application using the SDK for your platform. Here's an example:
SQLJavaScriptDartSwiftKotlinPython
```

1
2
3
4
5
6
7
create or replacefunctionsearch_books_by_title_prefix(prefix text)returns setof books AS $$beginreturn queryselect*from books where to_tsvector('english', title) @@ to_tsquery(prefix ||':*');end;$$ language plpgsql;

```

This function takes a prefix parameter and returns all books where the title contains a word starting with that prefix. The `:*` operator is used to denote a prefix match in the `to_tsquery()` function.
## Handling spaces in queries[#](https://supabase.com/docs/guides/database/full-text-search#handling-spaces-in-queries)
When you want the search term to include a phrase or multiple words, you can concatenate words using a `+` as a placeholder for space:
```

1
select*from search_books_by_title_prefix('Little+Puppy');

```

## Creating indexes[#](https://supabase.com/docs/guides/database/full-text-search#creating-indexes)
Now that we have Full Text Search working, let's create an `index`. This will allow Postgres to "build" the documents preemptively so that they don't need to be created at the time we execute the query. This will make our queries much faster.
### Searchable columns[#](https://supabase.com/docs/guides/database/full-text-search#searchable-columns)
Let's create a new column `fts` inside the `books` table to store the searchable index of the `title` and `description` columns.
We can use a special feature of Postgres called [Generated Columns](https://www.postgresql.org/docs/current/ddl-generated-columns.html) to ensure that the index is updated any time the values in the `title` and `description` columns change.
SQLData
```

1
2
3
4
5
6
7
8
9
altertable booksadd column fts tsvector generatedalwaysas (to_tsvector('english', description||''|| title)) stored;createindexbooks_ftson books using gin (fts); -- generate the indexselect id, ftsfrom books;

```

### Search using the new column[#](https://supabase.com/docs/guides/database/full-text-search#search-using-the-new-column)
Now that we've created and populated our index, we can search it using the same techniques as before:
SQLJavaScriptDartSwiftKotlinPythonData
```

1
2
3
4
5
6
select*from bookswhere fts @@ to_tsquery('little & big');

```

## Query operators[#](https://supabase.com/docs/guides/database/full-text-search#query-operators)
Visit [Postgres: Text Search Functions and Operators](https://www.postgresql.org/docs/current/functions-textsearch.html) to learn about additional query operators you can use to do more advanced `full text queries`, such as:
### Proximity: `<->`[#](https://supabase.com/docs/guides/database/full-text-search#proximity)
The proximity symbol is useful for searching for terms that are a certain "distance" apart. For example, to find the phrase `big dreams`, where the a match for "big" is followed immediately by a match for "dreams":
SQLJavaScriptDartSwiftKotlinPython
```

1
2
3
4
5
6
select*from bookswhere to_tsvector(description) @@ to_tsquery('big <-> dreams');

```

We can also use the `<->` to find words within a certain distance of each other. For example to find `year` and `school` within 2 words of each other:
SQLJavaScriptDartSwiftKotlinPython
```

1
2
3
4
5
6
select*from bookswhere to_tsvector(description) @@ to_tsquery('year <2> school');

```

### Negation: `!`[#](https://supabase.com/docs/guides/database/full-text-search#negation)
The negation symbol can be used to find phrases which _don't_ contain a search term. For example, to find records that have the word `big` but not `little`:
SQLJavaScriptDartSwiftKotlinPython
```

1
2
3
4
5
6
select*from bookswhere to_tsvector(description) @@ to_tsquery('big & !little');

```

## Resources[#](https://supabase.com/docs/guides/database/full-text-search#resources)
  * [Postgres: Text Search Functions and Operators](https://www.postgresql.org/docs/12/functions-textsearch.html)

[Edit this page on GitHub ](https://github.com/supabase/supabase/blob/master/apps/docs/content/guides/database/full-text-search.mdx)
Watch video guide
![Video guide preview](https://supabase.com/docs/_next/image?url=https%3A%2F%2Fimg.youtube.com%2Fvi%2Fb-mgca_2Oe4%2F0.jpg&w=3840&q=75)
### Is this helpful?
No Yes
### On this page
[Preparation](https://supabase.com/docs/guides/database/full-text-search#preparation)[Usage](https://supabase.com/docs/guides/database/full-text-search#usage)[to_tsvector()](https://supabase.com/docs/guides/database/full-text-search#to-tsvector)[to_tsquery()](https://supabase.com/docs/guides/database/full-text-search#to-tsquery)[Match: @@](https://supabase.com/docs/guides/database/full-text-search#match)[Basic full text queries](https://supabase.com/docs/guides/database/full-text-search#basic-full-text-queries)[Search a single column](https://supabase.com/docs/guides/database/full-text-search#search-a-single-column)[Search multiple columns](https://supabase.com/docs/guides/database/full-text-search#search-multiple-columns)[Match all search words](https://supabase.com/docs/guides/database/full-text-search#match-all-search-words)[Match any search words](https://supabase.com/docs/guides/database/full-text-search#match-any-search-words)[Partial search](https://supabase.com/docs/guides/database/full-text-search#partial-search)[Implementing partial search](https://supabase.com/docs/guides/database/full-text-search#implementing-partial-search)[Extending functionality with RPC](https://supabase.com/docs/guides/database/full-text-search#extending-functionality-with-rpc)[Handling spaces in queries](https://supabase.com/docs/guides/database/full-text-search#handling-spaces-in-queries)[Creating indexes](https://supabase.com/docs/guides/database/full-text-search#creating-indexes)[Searchable columns](https://supabase.com/docs/guides/database/full-text-search#searchable-columns)[Search using the new column](https://supabase.com/docs/guides/database/full-text-search#search-using-the-new-column)[Query operators](https://supabase.com/docs/guides/database/full-text-search#query-operators)[Proximity: <->](https://supabase.com/docs/guides/database/full-text-search#proximity)[Negation: !](https://supabase.com/docs/guides/database/full-text-search#negation)[Resources](https://supabase.com/docs/guides/database/full-text-search#resources)
  * Need some help?
[Contact support](https://supabase.com/support)
  * Latest product updates?
[See Changelog](https://supabase.com/changelog)
  * Something's not right?
[Check system status](https://status.supabase.com/)


[© Supabase Inc](https://supabase.com/)—[Contributing](https://github.com/supabase/supabase/blob/master/apps/docs/DEVELOPERS.md)[Author Styleguide](https://github.com/supabase/supabase/blob/master/apps/docs/CONTRIBUTING.md)[Open Source](https://supabase.com/open-source)[SupaSquad](https://supabase.com/supasquad)Privacy Settings
[GitHub](https://github.com/supabase/supabase)[Twitter](https://twitter.com/supabase)[Discord](https://discord.supabase.com/)
